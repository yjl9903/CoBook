import{v as S,d as b,r as p,c as H,a as h,u as i,b as I,w as c,N as $,e as j,f as u,P as A,F as k,g as T,p as F,h as U,o as f,I as g,i as P,t as W,j as z,k as G,C as L,B as O,l as q,m as J,n as K,q as M,s as R,G as Q,x as X,y as Y,z as Z,A as ee,D as te,E as re,H as ne,J as oe}from"./vendor.43e7d542.js";const se=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}};se();function ae(e={}){const{immediate:t=!1,onNeedRefresh:r,onOfflineReady:a,onRegistered:n,onRegisterError:s}=e;let o;const d=async(l=!0)=>{};return"serviceWorker"in navigator&&(o=new S("/sw.js",{scope:"/",type:"classic"}),o.addEventListener("activated",l=>{l.isUpdate?window.location.reload():a==null||a()}),o.register({immediate:t}).then(l=>{n==null||n(l)}).catch(l=>{s==null||s(l)})),d}const v="Coin Book",x="https://cobook-worker.yjl9903.workers.dev",B="EnterHome";const ie={style:{"font-weight":"bold"}},le=b({setup(e){const t=T(),r=p(!1);F(B,r);const a=H(()=>t.name==="Login"),n=p(!1);return(s,o)=>{const d=U("router-view");return f(),h(k,null,[!i(a)&&r.value?(f(),I(i($),{key:0,fixed:"",placeholder:""},{left:c(()=>[u(i(g),{name:"ellipsis",color:"black",onClick:o[0]||(o[0]=l=>n.value=!0)})]),title:c(()=>[P("span",ie,W(i(v)),1)]),right:c(()=>[u(i(g),{name:"setting-o",color:"black"})]),_:1})):j("",!0),u(i(A),{show:n.value,"onUpdate:show":o[1]||(o[1]=l=>n.value=l),position:"left",style:{height:"100%",width:"60%"}},null,8,["show"]),u(d)],64)}}}),ue="modulepreload",w={},ce="/",D=function(t,r){return!r||r.length===0?t():Promise.all(r.map(a=>{if(a=`${ce}${a}`,a in w)return;w[a]=!0;const n=a.endsWith(".css"),s=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${s}`))return;const o=document.createElement("link");if(o.rel=n?"stylesheet":ue,n||(o.as="script",o.crossOrigin=""),o.href=a,document.head.appendChild(o),n)return new Promise((d,l)=>{o.addEventListener("load",d),o.addEventListener("error",l)})})).then(()=>t())};var de=Object.defineProperty,pe=Object.defineProperties,fe=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable,E=(e,t,r)=>t in e?de(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ve=(e,t)=>{for(var r in t||(t={}))me.call(t,r)&&E(e,r,t[r]);if(y)for(var r of y(t))he.call(t,r)&&E(e,r,t[r]);return e},_e=(e,t)=>pe(e,fe(t)),m=class{constructor(e,t,r){this.errorHandler=[],this.fingerprint=r,this.api=z.create({baseURL:e,headers:{Authorization:t}})}async validate(){try{return await this.api.get("/"),!0}catch{return!1}}async create(e){const{data:t}=await this.api.post("/account",_e(ve({},e),{fingerprint:this.fingerprint,timestamp:new Date().getTime()}));if(m.isResponseError(t))throw await this.handleError(t),t;return t}async list(){const{data:e}=await this.api.get("/accounts");if(m.isResponseError(e))throw await this.handleError(e),e;return e.accounts}static isResponseError(e){return!e||e.status==="ERROR"}onError(e){this.errorHandler.push(e)}async handleError(e){await Promise.all(this.errorHandler.map(t=>t(e)))}};async function C(){return await(await(await D(()=>import("./fp.esm.27f96b96.js"),[])).load()).get()}const ge=C();async function we(){try{return await ge}catch{return await C()}}const V=G("authorization",{state:()=>({fingerprint:"",pass:""}),getters:{client:e=>new m(x,e.pass,e.fingerprint)},persist:!0});async function ye(){const e=V();return e.pass!==""&&e.fingerprint!==""&&await e.client.validate()}async function Oe(e){const t=V();return t.fingerprint=(await we()).visitorId,await new m(x,e,t.fingerprint).validate()?(t.pass=e,!0):!1}const Ee={id:"home",h:"full",pt:"4"},be={style:{margin:"16px"}},ke=Y("\u8BB0\u5F55"),Pe=b({setup(e){const t=J(B);t.value=!0;const r=p(!1),a=p("");return(n,s)=>(f(),h("div",Ee,[u(i(L),{inset:""},{default:c(()=>[u(i(K),{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=o=>a.value=o),label:"\u91D1\u989D",readonly:"",clickable:"",onTouchstart:s[1]||(s[1]=M(o=>r.value=!0,["stop"])),"input-align":"right"},null,8,["modelValue"]),u(i(R),null,{default:c(()=>[u(i(Q),{border:!1,clickable:""},{default:c(()=>[(f(),h(k,null,X(8,o=>u(i(Z),{icon:"photo-o",text:"\u6587\u5B57"})),64))]),_:1})]),_:1})]),_:1}),P("div",be,[u(i(O),{round:"",block:"",type:"success","native-type":"submit"},{default:c(()=>[ke]),_:1})]),u(i(q),{modelValue:a.value,"onUpdate:modelValue":s[2]||(s[2]=o=>a.value=o),"extra-key":".",show:r.value,maxlength:10,onBlur:s[3]||(s[3]=o=>r.value=!1)},null,8,["modelValue","show"])]))}}),_=ee({history:te(),routes:[{path:"/",name:"Home",component:Pe},{path:"/login",name:"Login",component:()=>D(()=>import("./index.780281dc.js"),["assets/index.780281dc.js","assets/index.728f1658.css","assets/vendor.43e7d542.js","assets/vendor.33e4995a.css"]),meta:{title:"\u767B\u9646"}}],scrollBehavior(e,t,r){return r||{top:0}}});_.beforeEach(async e=>e.name==="Login"||await ye()?!0:{name:"Login"});_.beforeEach(e=>{e.meta.title?document.title=e.meta.title+" - "+v:document.title=v});ae({});const N=re();N.use(ne);oe(le).use(R).use(L).use(O).use(_).use(N).mount("#app");{document.addEventListener("gesturestart",function(t){t.preventDefault()}),document.addEventListener("dblclick",function(t){t.preventDefault()}),document.addEventListener("touchstart",function(t){t.touches.length>1&&t.preventDefault()});let e=0;document.addEventListener("touchend",function(t){const r=new Date().getTime();r-e<=300&&t.preventDefault(),e=r},!1)}export{Oe as l,v as n};
