import{v as F,d as b,c as N,r as f,a as m,u as i,b as S,w as c,N as I,e as $,f as l,P as A,F as E,g as j,h as T,o as p,I as _,i as P,t as H,j as U,k as W,C as O,B as L,l as z,m as G,n as q,p as R,G as J,q as K,s as M,x as Q,y as X,z as Y,A as Z,D as ee,E as te}from"./vendor.d6dcefe0.js";const re=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}};re();function oe(e={}){const{immediate:t=!1,onNeedRefresh:o,onOfflineReady:s,onRegistered:r,onRegisterError:n}=e;let a;const d=async(u=!0)=>{};return"serviceWorker"in navigator&&(a=new F("/sw.js",{scope:"/",type:"classic"}),a.addEventListener("activated",u=>{u.isUpdate?window.location.reload():s==null||s()}),a.register({immediate:t}).then(u=>{r==null||r(u)}).catch(u=>{n==null||n(u)})),d}const h="Coin Book",ne="https://cobook-worker.yjl9903.workers.dev",se=[{name:"Breakfast",icon:"/img/breakfast.svg",category:"Food",tags:["Food","Breakfast"],amount:10},{name:"Lunch",icon:"/img/lunch.svg",category:"Food",tags:["Food","Lunch"],amount:10},{name:"Dinner",icon:"/img/dinner.svg",category:"Food",tags:["Food","Dinner"],amount:10},{name:"Tea",icon:"/img/tea.svg",category:"Drink",tags:["Drink"]}];const ae={style:{"font-weight":"bold"}},ie=b({setup(e){const t=j(),o=N(()=>t.name==="Login"),s=f(!1);return(r,n)=>{const a=T("router-view");return p(),m(E,null,[i(o)?$("",!0):(p(),S(i(I),{key:0,fixed:"",placeholder:""},{left:c(()=>[l(i(_),{name:"ellipsis",color:"black",onClick:n[0]||(n[0]=d=>s.value=!0)})]),title:c(()=>[P("span",ae,H(i(h)),1)]),right:c(()=>[l(i(_),{name:"setting-o",color:"black"})]),_:1})),l(i(A),{show:s.value,"onUpdate:show":n[1]||(n[1]=d=>s.value=d),position:"left",style:{height:"100%",width:"60%"}},null,8,["show"]),l(a)],64)}}}),le="modulepreload",y={},ue="/",x=function(t,o){return!o||o.length===0?t():Promise.all(o.map(s=>{if(s=`${ue}${s}`,s in y)return;y[s]=!0;const r=s.endsWith(".css"),n=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${n}`))return;const a=document.createElement("link");if(a.rel=r?"stylesheet":le,r||(a.as="script",a.crossOrigin=""),a.href=s,document.head.appendChild(a),r)return new Promise((d,u)=>{a.addEventListener("load",d),a.addEventListener("error",u)})})).then(()=>t())};var ce=Object.defineProperty,de=Object.defineProperties,pe=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable,k=(e,t,o)=>t in e?ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,he=(e,t)=>{for(var o in t||(t={}))fe.call(t,o)&&k(e,o,t[o]);if(w)for(var o of w(t))me.call(t,o)&&k(e,o,t[o]);return e},ge=(e,t)=>de(e,pe(t)),g=class{constructor(e,t,o){this.errorHandler=[],this.fingerprint=o,this.api=U.create({baseURL:e,headers:{Authorization:t}})}async validate(){try{return await this.api.get("/"),!0}catch{return!1}}async create(e){const{data:t}=await this.api.post("/account",ge(he({},e),{fingerprint:this.fingerprint,timestamp:new Date().getTime()}));if(g.isResponseError(t))throw await this.handleError(t),t;return t}async list(){const{data:e}=await this.api.get("/accounts");if(g.isResponseError(e))throw await this.handleError(e),e;return e.accounts}static isResponseError(e){return!e||e.status==="ERROR"}onError(e){this.errorHandler.push(e)}async handleError(e){await Promise.all(this.errorHandler.map(t=>t(e)))}};async function B(){return await(await(await x(()=>import("./fp.esm.27f96b96.js"),[])).load()).get()}const ve=B();async function D(){try{return await ve}catch{return await B()}}const C=W("authorization",{state:()=>({pass:""}),persist:!0});async function _e(){return C().pass!==""}async function Pe(e){const t=C();return await new g(ne,e,(await D()).visitorId).validate()?(t.pass=e,!0):!1}const ye={id:"home",h:"full",pt:"4"},we={style:{margin:"16px"}},ke=M("\u63D0\u4EA4"),be=b({setup(e){const t=f(!1),o=f("");return D().then(s=>{console.log(s.visitorId),console.log(s)}),console.log(se),(s,r)=>(p(),m("div",ye,[l(i(O),{inset:""},{default:c(()=>[l(i(G),{modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=n=>o.value=n),label:"\u91D1\u989D",readonly:"",clickable:"",onTouchstart:r[1]||(r[1]=q(n=>t.value=!0,["stop"])),"input-align":"right"},null,8,["modelValue"]),l(i(R),null,{default:c(()=>[l(i(J),{border:!1,clickable:""},{default:c(()=>[(p(),m(E,null,K(8,n=>l(i(Q),{icon:"photo-o",text:"\u6587\u5B57"})),64))]),_:1})]),_:1})]),_:1}),P("div",we,[l(i(L),{round:"",block:"",type:"primary","native-type":"submit"},{default:c(()=>[ke]),_:1})]),l(i(z),{modelValue:o.value,"onUpdate:modelValue":r[2]||(r[2]=n=>o.value=n),"extra-key":".",show:t.value,maxlength:10,onBlur:r[3]||(r[3]=n=>t.value=!1)},null,8,["modelValue","show"])]))}}),v=X({history:Y(),routes:[{path:"/",name:"Home",component:be},{path:"/login",name:"Login",component:()=>x(()=>import("./index.1d16b95d.js"),["assets/index.1d16b95d.js","assets/index.728f1658.css","assets/vendor.d6dcefe0.js","assets/vendor.33e4995a.css"]),meta:{title:"\u767B\u9646"}}],scrollBehavior(e,t,o){return o||{top:0}}});v.beforeEach(async e=>e.name==="Login"||await _e()?!0:{name:"Login"});v.beforeEach(e=>{e.meta.title?document.title=e.meta.title+" - "+h:document.title=h});oe({});const V=Z();V.use(ee);te(ie).use(R).use(O).use(L).use(v).use(V).mount("#app");export{Pe as l,h as n};
