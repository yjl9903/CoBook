import{v as V,d as E,c as N,r as f,a as m,u as i,b as S,w as c,N as I,e as T,f as l,P as $,F as b,g as j,h as A,o as p,I as _,i as P,t as H,j as U,k as W,C as L,B as O,l as z,m as G,n as q,p as D,G as J,q as K,s as M,x as Q,y as X,z as Y,A as Z,D as ee,E as te}from"./vendor.d6dcefe0.js";const re=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}};re();function oe(t={}){const{immediate:e=!1,onNeedRefresh:r,onOfflineReady:s,onRegistered:o,onRegisterError:n}=t;let a;const d=async(u=!0)=>{};return"serviceWorker"in navigator&&(a=new V("/sw.js",{scope:"/",type:"classic"}),a.addEventListener("activated",u=>{u.isUpdate?window.location.reload():s==null||s()}),a.register({immediate:e}).then(u=>{o==null||o(u)}).catch(u=>{n==null||n(u)})),d}const h="Coin Book",ne="https://cobook-worker.yjl9903.workers.dev",se=[{name:"Breakfast",icon:"/img/breakfast.svg",category:"Food",tags:["Food","Breakfast"],amount:10},{name:"Lunch",icon:"/img/lunch.svg",category:"Food",tags:["Food","Lunch"],amount:10},{name:"Dinner",icon:"/img/dinner.svg",category:"Food",tags:["Food","Dinner"],amount:10},{name:"Tea",icon:"/img/tea.svg",category:"Drink",tags:["Drink"]}];const ae={style:{"font-weight":"bold"}},ie=E({setup(t){const e=j(),r=N(()=>e.name==="Login"),s=f(!1);return(o,n)=>{const a=A("router-view");return p(),m(b,null,[i(r)?T("",!0):(p(),S(i(I),{key:0,fixed:"",placeholder:""},{left:c(()=>[l(i(_),{name:"ellipsis",color:"black",onClick:n[0]||(n[0]=d=>s.value=!0)})]),title:c(()=>[P("span",ae,H(i(h)),1)]),right:c(()=>[l(i(_),{name:"setting-o",color:"black"})]),_:1})),l(i($),{show:s.value,"onUpdate:show":n[1]||(n[1]=d=>s.value=d),position:"left",style:{height:"100%",width:"60%"}},null,8,["show"]),l(a)],64)}}}),le="modulepreload",y={},ue="/",B=function(e,r){return!r||r.length===0?e():Promise.all(r.map(s=>{if(s=`${ue}${s}`,s in y)return;y[s]=!0;const o=s.endsWith(".css"),n=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${n}`))return;const a=document.createElement("link");if(a.rel=o?"stylesheet":le,o||(a.as="script",a.crossOrigin=""),a.href=s,document.head.appendChild(a),o)return new Promise((d,u)=>{a.addEventListener("load",d),a.addEventListener("error",u)})})).then(()=>e())};var ce=Object.defineProperty,de=Object.defineProperties,pe=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable,k=(t,e,r)=>e in t?ce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,he=(t,e)=>{for(var r in e||(e={}))fe.call(e,r)&&k(t,r,e[r]);if(w)for(var r of w(e))me.call(e,r)&&k(t,r,e[r]);return t},ge=(t,e)=>de(t,pe(e)),g=class{constructor(t,e,r){this.errorHandler=[],this.fingerprint=r,this.api=U.create({baseURL:t,headers:{Authorization:e}})}async validate(){try{return await this.api.get("/"),!0}catch{return!1}}async create(t){const{data:e}=await this.api.post("/account",ge(he({},t),{fingerprint:this.fingerprint,timestamp:new Date().getTime()}));if(g.isResponseError(e))throw await this.handleError(e),e;return e}async list(){const{data:t}=await this.api.get("/accounts");if(g.isResponseError(t))throw await this.handleError(t),t;return t.accounts}static isResponseError(t){return!t||t.status==="ERROR"}onError(t){this.errorHandler.push(t)}async handleError(t){await Promise.all(this.errorHandler.map(e=>e(t)))}};async function R(){return await(await(await B(()=>import("./fp.esm.27f96b96.js"),[])).load()).get()}const ve=R();async function x(){try{return await ve}catch{return await R()}}const C=W("authorization",{state:()=>({pass:""}),persist:!0});async function _e(){return C().pass!==""}async function Pe(t){const e=C();return await new g(ne,t,(await x()).visitorId).validate()?(e.pass=t,!0):!1}const ye={id:"home",h:"full",pt:"4"},we={style:{margin:"16px"}},ke=M("\u8BB0\u5F55"),Ee=E({setup(t){const e=f(!1),r=f("");return x().then(s=>{console.log(s.visitorId),console.log(s)}),console.log(se),(s,o)=>(p(),m("div",ye,[l(i(L),{inset:""},{default:c(()=>[l(i(G),{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=n=>r.value=n),label:"\u91D1\u989D",readonly:"",clickable:"",onTouchstart:o[1]||(o[1]=q(n=>e.value=!0,["stop"])),"input-align":"right"},null,8,["modelValue"]),l(i(D),null,{default:c(()=>[l(i(J),{border:!1,clickable:""},{default:c(()=>[(p(),m(b,null,K(8,n=>l(i(Q),{icon:"photo-o",text:"\u6587\u5B57"})),64))]),_:1})]),_:1})]),_:1}),P("div",we,[l(i(O),{round:"",block:"",type:"success","native-type":"submit"},{default:c(()=>[ke]),_:1})]),l(i(z),{modelValue:r.value,"onUpdate:modelValue":o[2]||(o[2]=n=>r.value=n),"extra-key":".",show:e.value,maxlength:10,onBlur:o[3]||(o[3]=n=>e.value=!1)},null,8,["modelValue","show"])]))}}),v=X({history:Y(),routes:[{path:"/",name:"Home",component:Ee},{path:"/login",name:"Login",component:()=>B(()=>import("./index.8ab837d3.js"),["assets/index.8ab837d3.js","assets/index.728f1658.css","assets/vendor.d6dcefe0.js","assets/vendor.33e4995a.css"]),meta:{title:"\u767B\u9646"}}],scrollBehavior(t,e,r){return r||{top:0}}});v.beforeEach(async t=>t.name==="Login"||await _e()?!0:{name:"Login"});v.beforeEach(t=>{t.meta.title?document.title=t.meta.title+" - "+h:document.title=h});oe({});const F=Z();F.use(ee);te(ie).use(D).use(L).use(O).use(v).use(F).mount("#app");{document.addEventListener("gesturestart",function(e){e.preventDefault()}),document.addEventListener("dblclick",function(e){e.preventDefault()}),document.addEventListener("touchstart",function(e){e.touches.length>1&&e.preventDefault()});let t=0;document.addEventListener("touchend",function(e){const r=new Date().getTime();r-t<=300&&e.preventDefault(),t=r},!1)}export{Pe as l,h as n};
